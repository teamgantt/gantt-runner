pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
--game runner
--by tg devs

--pico imports (not lua syntax)
#include src/utils.lua
#include src/collectibles.lua
#include src/collision.lua
#include src/particles.lua
#include src/player.lua
#include src/camera.lua
#include src/game.lua
#include src/ui.lua

function _init()
	debug=false
	i_camera_follow()
	i_game()
	i_player()
	i_milestone_anims()
	i_particles()
end

function _update()
	if (g.scene == 'select') then
		if (btn(🅾️)) then
			g.scene = 'game'
			g.character = 'john'
		end
		if (btn(❎)) then
			g.scene = 'game'
			g.character = 'nathan'
		end
	else
		u_player()
		u_game()
		u_milestone_anims()
		u_fx()
	end
end

function _draw()
	cls(7)
	d_fx()

	if g.scene =='select' then
		print('select character:', cam.x+20, 30)
		print("z for lil' john", cam.x+20, 40)
		print('x for barrel nathan', cam.x+20, 50)
	else
		d_game()
		d_milestone_anims()
		d_camera_follow()
		d_player()
	end
	d_ui();

	--debug stuff
	if (debug) then
		print("dy:"..tostr(player.dy)..' dx:'..tostr(player.dx),cam.x, cam.y+10,12)
		print("p.feetx:"..flr(player.feet_x), cam.x, cam.y+20, 12)
		print("p.feety:"..flr(player.feet_y), cam.x, cam.y+30, 12)
	end
end


-->8
--john

-->8
--game bars


-->8
--collide check

-->8
--milestone

--TODO: put this somewhere else


-->8
--particles


__gfx__
00000000011650000116500001165000011650000116500000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000011560000115600001156000011560000115600000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700011111100111111001111110011111100111111000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700004fff00004fff00004fff00004fff00004fff00000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700000fff00000fff00000fff00000fff00000fff00000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700011115000011100000111000001110000011100000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000f555f0000f55000001f5000005f5000001f500000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005050000500050000505000005500000050500000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001165000000af0000009700000097000000a90000009a00000099000000a7000000a9000000000000000000000000000000000000000000000000000
000000000115600000aaaf000099a7000009a00000a99900009a9a0000aa9900000a9000007aa900000000000000000000000000000000000000000000000000
00000000011111100aaa7af0009aaa000009a000009a990009a999a000a99900000a900000aaa900000000000000000000000000000000000000000000000000
0000000004fff000aaaaaaaf009aaa000009a00000a999009a9a999a00aa9900000a900000aaa900000000000000000000000000000000000000000000000000
0000000000fff0009aaaaaaa009aaa000009a000009a9900a9a9999900a99900000a900000aaa900000000000000000000000000000000000000000000000000
00000000f1111f0009aaaaa0009aaa000009a00000a999000a9a999000aa9900000a900000aaa900000000000000000000000000000000000000000000000000
0000000000555000009aaa000099aa000009a000009a990000a9990000a99900000a900000aaa900000000000000000000000000000000000000000000000000
00000000050005000009a0000009a0000009a0000009a000000a9000000a9000000a9000000a9000000000000000000000000000000000000000000000000000
00001111555000000000111115500000000000000000000000001111555000000000001155500000000000000000000000000000000000000000000000000000
00011115656500000001111155650000000011115550000000011115656500000000011155650000000000000000000000000000000000000000000000000000
00011115565500000001111155560000000111115565000000011115565500000000111155560000077777777777777700000000000000000000000000000000
0001111555650000000111115565000000011111555600000001111555650000000011115511110007ccccccccccccc700000000000000000000000000000000
0011111111111100001111111111110000011111556500000011111111111100000011111111000007ccccccccccccc700000000000000000000000000000000
00055fffffff00000005555fffff0000001111111111110000055fffffff00000fff111ff5f0000007ccccccccccccc700000000000000000000000000000000
0005fff5ff5ff000000555fff5f500000005555fffff00000005fff5ff5ff0000fff15fffff00000077777777777777700000000000000000000000000000000
00005fffffff0000000055ffffff0000000055fff5f50000ff005fffffff00000ffff55ffff00000000007bbbbbbbbb700000000000000000000000000000000
000015fffff000000000155ffff00000000015ffffff0000ff1015fffff00ff001110555ff0fff00000007bbbbbbbbb700000000000000000000000000000000
000111111100000000011111110000000000155ffff00000ff1111111dd11ff000111111111fff00000007bbbbbbbbb700000000000000000000000000000000
001111111d100000ff1111111d1ff000000111111d00000000111111111110000001111111100000000007777777777700000000000000000000000000000000
0011111111100000ff111111111ff0000001fff111f00000000011111110000000001111100000000000000007ddddd700000000000000000000000000000000
00ffff111ff0000000001111100000000000fff11ff00000011d11111111100000001111100000000000000007ddddd700000000000000000000000000000000
00fffddddff00000001dddddd110000000001dddd0000000011dddddddd110000000dd0dd00000000000000007ddddd700000000000000000000000000000000
0000dd0dd0000000001ddd0d1110000000001dd11000000001100000001100000001dd0dd1000000000000000777777700000000000000000000000000000000
00001101110000000011000011000000000000111000000000000000000000000001100011000000000000000000000000000000000000000000000000000000
000001cccc10000000000111cc100000000000000000000000000011cc100000000001cccc100000000000000000000000000000000000000000000000000000
0000177bbb710000000011177b71000000000111cc110000000001177b7100000000177bbb710000000000000000000000000000000000000000000000000000
00001777dd710000000011177d710000000011177b710000000011177d71000000001777dd710000000000000000000000000000000000000000000000000000
00011111111110000000111111111000000011177d71000000001111111110000001111111111000000000000000000000000000000000000000000000000000
0000ffffffff00000000ffffffff00000000111111111000000011ffffff00000000ff5ff5ff0000000000000000000000000000000000000000000000000000
000fff5ff5fff00000004fff5f5f000000004fffffff000000000fff5f5f00000000ffffffff0000000000000000000000000000000000000000000000000000
00004ffffff40000000044ffffff0000000044ff5f5f00000000044ffff40000000ff999999ff000000000000000000000000000000000000000000000000000
00000444444000000005ff99999ff0000005ff99999ff0000000044444400000005ff444449ff900000000000000000000000000000000000000000000000000
0005ff9999ff90000054ff44444ff9000055ff44444ff9000005ff9999ff900000d5dd4444656600000000000000000000000000000000000000000000000000
0054ff4444ff440000dd5dd66666660000ddddd6666566000055ff4444ff49000054546666494900000000000000000000000000000000000000000000000000
00dddd66666666000055454444449900005545444444990000554544445499000055454444449400000000000000000000000000000000000000000000000000
00545454444949000054545444494900005454544449490000dddd666666660000dddd5444666600000000000000000000000000000000000000000000000000
0055454444949900005dddd666666600005dddd66666660000554544449499000055456666949900000000000000000000000000000000000000000000000000
00dddd66666666000005545444949000000554544494900000545454444949000005545444494000000000000000000000000000000000000000000000000000
0005454544949000000045454ff9000000054ff54949000000dddd66666666000005ff5594ff9000000000000000000000000000000000000000000000000000
000554545949900000000ff00ff0000000000ff00ff0000000055454594990000000ff0000ff0000000000000000000000000000000000000000000000000000
__label__
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
777777777777777777777777777777777777777777777777777777777777777af777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777aaaf77777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777aaa7af7777777777777777777777777777777777777777777777777777777777777
777777777777777777777777777777777777777777777777777777777777aaaaaaaf777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777779aaaaaaa777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777779aaaaa7777777777777777777777777777777777777777777777777777777777777
777777777777777777777777777777777777777777777777777777777777779aaa77777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777779a777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777111155577777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777771111565657777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777771111556557777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777771111555657777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777711111111111177777777777777777777777777777777777777777777777777777777777777777777777777777777
777777777777777777777777777777777777755fffffff7777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777775fff5ff5ff777777777777777777777777777777777777777777777777777777777777777777777777777777777
777777777777777777777777777777777777775fffffff7777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777715fffff77777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777771111111777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777771111111d177777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777711111111177777777777777777777777777777777777777777777777777777777777777777777777777777777777
777777777777777777777777777777777777ffff111ff77777777777777777777777777777777777777777777777777777777777777777777777777777777777
777777777777777777777777777777777777fffddddff77777777777777777777777777777777777777777777777777777777777777777777777777777777777
99999999999999999999999999999999999999dd9dd9999999999999999999999999999999999999999999999999999999999999999999999999999999999999
9aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa11a111aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa9
9aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa9
9aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa9
9aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa9
9aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa9
9aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa9
9aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa9
9aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa9
9aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa9
99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777

__sfx__
90070200235112a521285012c5012f5012f5012250122501225010050100501005010050100501005010050100501005010050100501005010050100501005010050100501005010050100501005010050100501
550600001372302703017030070300703007030070300703007030070300703007030070300703007030070300703007030070300703007030070300703007030070300703007030070300703007030070300703
490b00002f72534735007050070500705007050070500705007050070500705007050070500705007050070500705007050070500705007050070500705007050070500705007050070500705007050070500705
540600000173300703017030070300703007030070300703007030070300703007030070300703007030070300703007030070300703007030070300703007030070300703007030070300703007030070300703
